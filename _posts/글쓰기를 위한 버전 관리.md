최근에 Ray Tracing Gems(RTG)에 기고하면서 처음으로 문서를 git으로 관리해봤다. 막바지가 되어서야 정리하면서 git을 사용했는데, 처음부터 사용했으면 좋겠다 싶었다.

글쓰기에 버전 관리를 하는 것은 사실 전혀 특별한 일은 아니다. 마크다운으로 글쓰기를 하는 많은 사람들은 이미 그렇게 하고 있지 않을까. 이 글에선 RTG의 경험을 바탕으로 git으로 글쓰기를 관리하는것에 대한 장점을 간단히 적어본다.

## 이전의 글쓰기
내 글쓰기 규칙은 두가지였다.
1. 동기화가 될 것
2. 마크다운을 사용할 것 (혹은 그와 비슷한 텍스트 기반 포멧)

이전엔 버전관리는 따로 하지 않고 단순 동기화만 진행했었기 때문에 Google Drive나 Dropbox면 충분했다. 보통은 마크다운을 이용했는데, 이건 은근히 여기저기서 불편한 점이 좀 많다. 구글 드라이브를 비롯 많은 플랫폼에서 플레인 텍스트를 지원하지 않는다. 어쩔 수 없이 참고 썼고, 윈도우에서는 typora, 아이패드에서는 iA Writer를 사용했다.

## RTG를 이용하면서 브랜치 관리
글쓰기에 브랜치라니, 일반적인 상황은 아니다. 정확히는 혼자 하느냐 협업하느냐의 차이다.

RTG와 같은 책은 보통 LaTeX을 이용해서 저작한다(레이텍 혹은 라텍이라고 읽는다). LaTeX은 마크다운과 같은(물론 훨씬 복잡한) 텍스트형 집필용 언어이자 포멧이고 수식을 입력하는데 장점이 있는 언어다. 텍스트 파일로 작업을 하면 이건 소스 파일이 되고, 이걸 프린트용 ps 파일이나 PDF 파일로 *컴파일*한다.

우선 나는 메인 브랜치로 작업한다. 그러다가 피드백을 위해 에디터에게 tex 파일을 보낸다. 이때 보내는 시점에 git 컴밋에 tag를 만들어 둔다. 까먹지 않기 위해서이다. 그 후 피드백을 받을땐 많은 것이 수정되어 올 수 있다. 그러면 tag로 만둘어둔 시점으로 새 브랜치를 따서(editor 브랜치라 하겠다) 그 브랜치에서 새 커밋으로 올린다. 그 후 내가 그동안 작업해둔 메인 브랜치에 머지한다.

피드백은 보통 어디가 수정되었는지 알아야 한다. 어디가 수정되었는지를 알려주는 경우도 있지만 단순 오타나 문법 오류 같은 경우 별다른 코멘트 없이 수정해줄 수도 있다. 어느쪽이든 이럴때 git에서 흔히 쓰는 diff 기능을 이용해서 커밋간의 diff를 보는 것은 문서를 파악하는데 매우 도움이 된다. 그동안 내가 작업해온 흐름도 있기 때문에 피드백을 주기 전과 받은 후의 diff를 보는 것은 중요하다.

## 두번째 브랜치 - 영문 교정
영문 교정을 받는 것이 또 하나의 일거리였다. 이건 좀 까다롭다. 왜냐면 영문 교정을 해주는 곳은 tex 같은걸 쓸리가 절대 없고 일반적으로 MS Word를 사용하기 때문이다. PDF를 주면 그걸 알아서 MS Word로 변환해서 교정해서 온다.

MS Word의 위대한 점은 교정 된 지점이나 코멘트 등을 MS Word 문서 하나 안에 다 담을 수 있다는 것이다. 나는 이 과정도 브랜치를 따서 했는데, 워드 문서를 보면서 일일이 내가 가진 tex 파일을 수정하고 다시 머지했다.

보통은 겹치는 일이 많진 않는데, 이런 상황에서 최악의 경우 나의 작업 에디터의 작업, 영문 교정의 작업이 동시에 일어나서 서로 컨플릭트가 생길 수 있다. 소스 관리가 된다는건 이런걸 수월하게 해준다.

## 블로그의 버전 관리
앞선 LaTeX 글쓰기의 버전 관리 경험이 무척 맘에 들다보니까 블로그도 버전 관리를 하기로 했다. 나는 이미 모든 블로그 글쓰기를 마크다운으로 하다보니 굳이 안할 이유가 없었다.

결정적인 계기는 이전에 올렸던 글 하나를 수정하면서 생긴 일 때문이었다. 글 하나를 수정해야했는데 마크다운으로 작성한 파일이 여러곳에 나뉘어 있었다. 동기화 문제, 저작 문제 등을 겪으면서 원본이 여러곳에 남아 있던것이었다. 그 중에서 최신을 찾아 수정을 마치면서 버전 관리를 결심하게 되었다.

여전히 글은 드랍박스로 동기화한다. 구글 드라이브가 아닌 드랍박스를 쓰는 이유는 새로 쓰는 아이패드 앱이 드랍박스만 지원하기 때문이다. 드랍박스로 동기화하는건 일종의 ‘임시 저장’ 상태인 것이고, 글이 어느정도 진척이 되면 커밋을 해서 보관한다. 사실 동기화는 이미 되기 때문에 커밋만 하고 굳이 푸시는 안해도 되긴 하지만 이전에 리모트를 안쓰고 여기저기서 작성하다 구글 드라이브에서 한번 컨플릭트가 나서 애를 먹은적이 있다. 그래서 github 에 블로그 리파지토리를 만들고 거기서 관리한다.

## 마무리
혼자 쓰는 글쓰기에 브랜치를 관리한다는건 거의 필요 없는 일이다. 다만 히스토리를 남기고 diff를 쉽게 볼 수 있다는건 확실히 큰 장점이다. 다만, 글쓰는 포멧인 마크다운이 표준화 되지 않고 구현체가 여러가지라서 완벽한 에디팅 환경을 만들기 쉽지 않다. 이 점은 시간이 해결해 줄 것이라고 믿는다.